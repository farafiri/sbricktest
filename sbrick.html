<!DOCTYPE html>
<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<meta name="viewport" content="user-scalable=yes, width=480" />
	
	<script type="text/javascript" src="jquery-3.1.0.min.js"></script>
	<script type="text/javascript" src="promise-queue.js"></script>
	<script type="text/javascript" src="bluetooth.js"></script>
	<script type="text/javascript" src="sbrick.js?q=2"></script>

  </head>
  <body>
  <h1>version 0.0.10</h1>
  <button onclick="SB.stopAll()">---</button>
  <button onclick="SB.disconnect()">END</button>
  <button onclick="connect();">CONNECT</button>
  <button onclick="SB.drive(SB.CHANNEL0, SB.CW, SB.MAX)">0+</button>
  <button onclick="SB.drive(SB.CHANNEL0, SB.CCW, SB.MAX)">0-</button>
  <button onclick="SB.drive(SB.CHANNEL1, SB.CW, SB.MAX)">1+</button>
  <button onclick="SB.drive(SB.CHANNEL1, SB.CCW, SB.MAX)">1-</button>
  <button onclick="SB.drive(SB.CHANNEL2, SB.CW, SB.MAX)">2+</button>
  <button onclick="SB.drive(SB.CHANNEL2, SB.CCW, SB.MAX)">2-</button>
  <button onclick="SB.drive(SB.CHANNEL3, SB.CW, SB.MAX)">3+</button>
  <button onclick="SB.drive(SB.CHANNEL3, SB.CCW, SB.MAX)">3-</button>
  
	<script>
  	  var SB = new SBrick();
	  SB._log = function(msg) {
	      document.getElementById("log1").innerHTML =  msg + '<br>' + document.getElementById("log1").innerHTML;
	  }
	  
	  function connect() {
	  alert('connect atempt');
	      SB.connect().then(
		  function() {
		      alert('connected');
			  SB._log('ddd');
			  setTimeout(function () {
				  SB.drive(SB.CHANNEL3, SB.CW, SB.MAX).then(
					  function() {alert('go');},
					  function(a, b) {alert('no go ' + a + ' ' + b);}
				  );
			  }, 100);
			  
          },
		  function() {alert('not connected');}
		  );
	  }
	</script>
	<div id="log1"></div>
  </body>
</html>